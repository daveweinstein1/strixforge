<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CachyOS Installation Guide: Strix Halo</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f3f4f6;
            --bg-tertiary: #e5e7eb;
            --text-primary: #111827;
            --text-secondary: #374151;
            --accent: #0284c7;
            --accent-hover: #0369a1;
            --border: #d1d5db;
            --code-bg: #f8fafc;
            --success: #15803d;
            --warning: #b45309;
            --danger: #b91c1c;
            --font-stack: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            --font-mono: 'JetBrains Mono', 'Fira Code', Consolas, monospace;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: var(--font-stack);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Sidebar Navigation - Hidden for Print Layout */
        nav {
            display: none;
        }

        /* Main Content */
        main {
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            padding: 4rem 2rem;
            background: white;
        }

        h1 {
            font-size: 2.2rem;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            white-space: nowrap;
        }

        .metadata {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            border-bottom: 3px solid var(--accent);
            padding-bottom: 1rem;
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
        }

        h2 {
            font-size: 1.8rem;
            color: var(--text-primary);
            margin-top: 3rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border);
            page-break-after: avoid;
        }

        h3 {
            font-size: 1.3rem;
            color: var(--accent);
            margin-top: 2rem;
            margin-bottom: 0.8rem;
            page-break-after: avoid;
        }

        h4 {
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
            font-weight: 700;
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
            text-align: justify;
        }

        strong {
            color: var(--text-primary);
            font-weight: 700;
        }

        ul,
        ol {
            margin-bottom: 1rem;
            padding-left: 2rem;
            color: var(--text-secondary);
        }

        li {
            margin-bottom: 0.4rem;
        }

        /* Links */
        a {
            color: var(--accent);
            text-decoration: underline;
        }

        /* Code Blocks */
        .code-container {
            position: relative;
            background-color: var(--code-bg);
            border: 1px solid var(--border);
            border-radius: 4px;
            margin: 1.5rem 0;
            overflow: hidden;
            page-break-inside: avoid;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--bg-secondary);
            padding: 0.4rem 1rem;
            border-bottom: 1px solid var(--border);
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-weight: 600;
        }

        pre {
            padding: 1rem;
            overflow-x: auto;
            font-family: var(--font-mono);
            font-size: 0.9rem;
            color: var(--text-primary);
            white-space: pre-wrap;
            /* Wrap text for printing */
        }

        /* Hide copy button for print/read-only view */
        button.copy-btn {
            display: none;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            border: 1px solid var(--border);
            page-break-inside: avoid;
        }

        th,
        td {
            padding: 0.8rem;
            text-align: left;
            border: 1px solid var(--border);
        }

        th {
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            font-weight: 700;
        }

        /* Alerts/Callouts */
        .alert {
            padding: 1rem;
            border-radius: 4px;
            margin: 1.5rem 0;
            border: 1px solid;
            background-color: #fff;
            page-break-inside: avoid;
        }

        .alert-warning {
            border-color: var(--warning);
            background-color: #fffbeb;
        }

        .alert-warning h4 {
            color: var(--warning);
        }

        .alert-danger {
            border-color: var(--danger);
            background-color: #fef2f2;
        }

        .alert-danger h4 {
            color: var(--danger);
        }

        .alert-info {
            border-color: var(--accent);
            background-color: #f0f9ff;
        }

        .alert-info h4 {
            color: var(--accent);
        }

        .alert-note {
            border-color: var(--text-secondary);
            background-color: var(--bg-secondary);
        }

        .alert-note h4 {
            color: var(--text-primary);
        }

        /* Directory Tree */
        .tree {
            font-family: var(--font-mono);
            color: var(--text-primary);
            background: var(--code-bg);
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: 4px;
            white-space: pre;
            page-break-inside: avoid;
        }

        footer {
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
            text-align: center;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Print Specifics */
        @media print {
            body {
                background: white;
                font-size: 12pt;
            }

            main {
                width: 100%;
                max-width: 100%;
                padding: 0;
                margin: 0;
            }

            .code-container,
            table,
            .alert {
                border: 1px solid #999;
            }

            a {
                text-decoration: none;
                color: #000;
            }
        }
    </style>
</head>

<body>

    <main>
        <header id="intro">
            <h1>CachyOS Installation Guide for Strix Halo</h1>

            <div class="metadata">
                <span><strong>Version:</strong> 2025.12.11</span>
                <span><strong>Date:</strong> December 11, 2025</span>
                <span><strong>Author:</strong> Dave Weinstein (<a href="https://github.com/daveweinstein1"
                        target="_blank">@daveweinstein1</a>)</span>
            </div>

            <section id="why-cachyos">
                <h2>Why CachyOS?</h2>
                <p>For cutting-edge hardware like the Strix Halo (launched early 2025), CachyOS offers distinct
                    advantages over traditional fixed-release distributions like Ubuntu or Kubuntu.</p>

                <h3>1. Optimized for Strix Halo</h3>
                <ul>
                    <li><strong>Proven Performance:</strong> CachyOS demonstrated strong performance leads with Strix
                        Halo in recent Phoronix benchmarks. (<a
                            href="https://www.phoronix.com/review/amd-strix-halo-linux-7" class="external"
                            target="_blank">Review</a>)</li>
                    <li><strong>Automatic Optimization:</strong> The CachyOS installer automatically detects Strix
                        Halo's <strong>Znver5</strong> architecture and installs a specifically optimized kernel
                        (<code>linux-cachyos-znver5</code>). This tailored compilation can deliver a <strong>~10%
                            performance increase</strong> compared to generic Linux kernels.</li>
                    <li><strong>Zen 5 Architecture:</strong> The entire package distribution is compiled to extract
                        maximum throughput from the 16-core processor and NPU.</li>
                </ul>

                <h3>2. Superior for AI Development</h3>
                <ul>
                    <li><strong>Bleeding Edge Access:</strong> Being Arch-based (rolling release) means you get the
                        newest PyTorch, TensorFlow, and ROCm drivers immediately. This is critical for new APUs where
                        driver support evolves weekly.</li>
                    <li><strong>AUR Advantage:</strong> You gain access to the Arch User Repository (AUR) for the latest
                        AI/ML tools.</li>
                    <li><strong>Performance Edge:</strong> While Ubuntu 25.10 runs AI models on Strix Halo adequately,
                        CachyOS's scheduler and kernel optimizations provide a tangible edge in compute tasks.</li>
                </ul>

                <h3>3. Windows-like Experience</h3>
                <p>CachyOS defaults to <strong>KDE Plasma</strong>, providing a familiar, highly customizable interface
                    similar to Windows, which minimizes the learning curve for new switchers.</p>
            </section>

            <section id="version-requirements">
                <h3>Version Requirements (Critical)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Component</th>
                            <th>Version</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Kernel</td>
                            <td><strong>6.18+</strong></td>
                            <td>Bleeding Edge (Active Strix Halo Work)</td>
                        </tr>
                        <tr>
                            <td>ROCm</td>
                            <td><strong>7.1+</strong></td>
                            <td>Critical for Compute/AI</td>
                        </tr>
                        <tr>
                            <td>Mesa</td>
                            <td><strong>25.3.1+</strong></td>
                            <td>Required for GFX1150</td>
                        </tr>
                    </tbody>
                </table>
                <div class="alert alert-warning">
                    <h4>Important</h4>
                    <p>Ensure you are using CachyOS <code>v3/v4</code> repositories to meet these requirements.</p>
                </div>
            </section>
        </header>

        <section id="device-notes">
            <h2>Device Specific Notes</h2>

            <h3>Beelink GTR9 Pro</h3>
            <ol>
                <li><strong>Disable E610 Ethernet:</strong> The internal 10Gb Ethernet causes crashes.
                    <ul>
                        <li><strong>BIOS:</strong> Go to <code>Advanced</code> &rarr; <code>Demo Board</code> &rarr;
                            <code>PCI-E Port</code> &rarr; <code>Device 3 Fun 2</code> &rarr; <strong>Disabled</strong>.
                        </li>
                        <li><strong>Kernel:</strong> Stage 1 script will also blacklist the <code>ice</code> driver
                            (<code>modprobe.blacklist=ice</code>) as a safeguard.</li>
                    </ul>
                </li>
                <li><strong>TDP Control:</strong> Stage 1 includes an interactive tool to limit power to
                    <strong>55W</strong> (Silent) or <strong>80W</strong> (Balanced) using <code>ryzenadj</code>.</li>
            </ol>

            <h3>Framework Desktop</h3>
            <ul>
                <li><strong>Golden Path:</strong> Framework hardware is fully compatible out of the box. No E610
                    workarounds are required. Use standard settings.</li>
            </ul>
        </section>

        <section id="part-1">
            <h2>Part 1: Manual Installation (Before Scripts)</h2>
            <div class="alert alert-info">
                <h4>Read Before Starting</h4>
                <p>This is the step-by-step guide you must follow BEFORE any scripts can run. The automated scripts
                    described in later sections can only be run <em>after</em> the base OS is installed and bootable.
                </p>
            </div>
        </section>

        <section id="phase-a">
            <h2>Phase A: Prepare Installation Media</h2>

            <h3>A.1: Download Ventoy</h3>
            <p>On your current system, download the latest release of Ventoy.</p>
            <ul>
                <li><strong>URL:</strong> <a href="https://www.ventoy.net/en/download.html" class="external"
                        target="_blank">ventoy.net/en/download.html</a></li>
                <li><strong>Windows:</strong> <code>ventoy-x.x.xx-windows.zip</code></li>
                <li><strong>Linux:</strong> <code>ventoy-x.x.xx-linux.tar.gz</code></li>
            </ul>

            <h3>A.2: Install Ventoy to USB</h3>
            <div class="alert alert-danger">
                <h4>Data Loss Warning</h4>
                <p>This process will completely erase the target USB drive. Ensure you have backed up any necessary data
                    before proceeding.</p>
            </div>

            <h4>Windows Instructions</h4>
            <ol>
                <li>Extract the zip file.</li>
                <li>Run <code>Ventoy2Disk.exe</code>.</li>
                <li>Select your USB drive from the dropdown.</li>
                <li>Click <strong>Install</strong> and confirm the warning prompts.</li>
            </ol>

            <h4>Linux Instructions</h4>
            <div class="code-container">
                <div class="code-header"><span>Terminal</span></div>
                <pre># Extract
tar -xzf ventoy-x.x.xx-linux.tar.gz
cd ventoy-x.x.xx

# Find your USB device (careful - don't pick wrong disk!)
lsblk

# Install (replace sdX with your USB device)
sudo ./Ventoy2Disk.sh -i /dev/sdX</pre>
            </div>

            <h3>A.3: Download CachyOS ISO</h3>
            <p>Download the latest <strong>CachyOS Desktop</strong> release (KDE or GNOME recommended) from <a
                    href="https://cachyos.org/download/" class="external">cachyos.org/download</a>.</p>

            <h3>A.4: Copy Files to USB</h3>
            <p>Once Ventoy is installed, the USB acts as a standard storage drive. Organize your files as follows:</p>
            <div class="tree">Ventoy USB/
                ├── cachyos-desktop-linux-xxxx.iso
                └── strix-halo-setup/
                ├── master-control.sh
                ├── lib/
                │ └── common.sh
                ├── stages/
                │ ├── 01-kernel-config.sh
                │ ├── 02-graphics-setup.sh
                │ ├── 03-system-update.sh
                │ ├── 04-lxd-setup.sh
                │ ├── 05-cleanup.sh
                │ ├── 06-validation.sh
                │ ├── 07-user-apps.sh
                │ └── 08-workspace-setup.sh
                └── docs/
                ├── INSTALL_GUIDE.md
                └── VERSION_REQUIREMENTS.md</div>

            <h3>A.5: Verify Ventoy USB</h3>
            <ol>
                <li>Safely eject the USB.</li>
                <li>Reinsert it.</li>
                <li>Verify you can see at least one ISO file and the <code>strix-halo-setup</code> folder.</li>
            </ol>
        </section>

        <section id="phase-b">
            <h2>Phase B: BIOS/UEFI Configuration</h2>
            <p>Before booting, you must configure the BIOS to ensure compatibility with CachyOS and the Strix Halo
                hardware features.</p>

            <h3>B.1: Enter BIOS</h3>
            <p>Restart the system and press <code>DEL</code>, <code>F2</code>, or <code>F10</code> during the splash
                screen.</p>

            <h3>B.2: Required Settings</h3>
            <table>
                <thead>
                    <tr>
                        <th>Setting</th>
                        <th>Required Value</th>
                        <th>Typical Location</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Secure Boot</td>
                        <td style="color: var(--danger); font-weight: bold;">DISABLED</td>
                        <td>Security &rarr; Secure Boot</td>
                    </tr>
                    <tr>
                        <td>Boot Mode</td>
                        <td><strong>UEFI</strong> (No CSM)</td>
                        <td>Boot &rarr; Boot Mode</td>
                    </tr>
                    <tr>
                        <td>IOMMU</td>
                        <td><strong>ENABLED</strong></td>
                        <td>Advanced &rarr; AMD CBS &rarr; NBIO</td>
                    </tr>
                    <tr>
                        <td>SVM Mode</td>
                        <td><strong>ENABLED</strong></td>
                        <td>Advanced &rarr; CPU Config</td>
                    </tr>
                    <tr>
                        <td>Fast Boot</td>
                        <td><strong>DISABLED</strong></td>
                        <td>Boot &rarr; Fast Boot</td>
                    </tr>
                    <tr>
                        <td><strong>10GbE LAN (E610)</strong></td>
                        <td><strong>DISABLED</strong></td>
                        <td>Internal Devices (See Device Specifics)</td>
                    </tr>
                </tbody>
            </table>

            <h3>B.3: Device-Specific BIOS Paths</h3>

            <h4>Beelink GTR9 Pro (BIOS v1.08)</h4>
            <p><em>Use distinct settings for stability (E610) and performance.</em></p>
            <table>
                <thead>
                    <tr>
                        <th>Setting</th>
                        <th>Desired Value</th>
                        <th>Default?</th>
                        <th>Exact Menu Path (v1.08)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Device 3 Fun 2</strong></td>
                        <td><strong>Disabled</strong></td>
                        <td>Enabled</td>
                        <td><code>Advanced</code> &rarr; <code>Demo Board</code> &rarr; <code>PCI-E Port</code> &rarr;
                            <code>Device 3 Fun 2</code></td>
                    </tr>
                    <tr>
                        <td>Secure Boot</td>
                        <td>Disabled</td>
                        <td>Enabled</td>
                        <td><code>Security</code> &rarr; <code>Secure Boot</code></td>
                    </tr>
                    <tr>
                        <td>IOMMU</td>
                        <td>Enabled</td>
                        <td>Auto</td>
                        <td><code>Advanced</code> &rarr; <code>AMD CBS</code> &rarr; <code>NBIO Common Options</code>
                        </td>
                    </tr>
                    <tr>
                        <td>SVM Mode</td>
                        <td>Enabled</td>
                        <td>Enabled</td>
                        <td><code>Advanced</code> &rarr; <code>CPU Config</code> &rarr; <code>SVM Mode</code></td>
                    </tr>
                </tbody>
            </table>
            <div class="alert alert-note">
                <h4>Why "Device 3 Fun 2"?</h4>
                <p>This esoteric setting is the specific PCIe function for the E610 10GbE controller. Disabling it here
                    affects the hardware restart loop issue more effectively than the OS-level blacklist.</p>
            </div>

            <h4>Framework Desktop</h4>
            <p><em>Most virtualization features are enabled by factory default. Focus on Secure Boot.</em></p>
            <table>
                <thead>
                    <tr>
                        <th>Setting</th>
                        <th>Desired Value</th>
                        <th>Default?</th>
                        <th>Exact Menu Path</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Secure Boot</td>
                        <td><strong>Disabled</strong></td>
                        <td>Enabled</td>
                        <td><code>Security</code> &rarr; <code>Secure Boot</code> &rarr;
                            <code>Enforce Secure Boot</code></td>
                    </tr>
                    <tr>
                        <td>IOMMU / SVM</td>
                        <td><strong>Enabled</strong></td>
                        <td><strong>Yes</strong></td>
                        <td><em>(Hidden / Always Enabled on Firmware level)</em></td>
                    </tr>
                    <tr>
                        <td>VRAM</td>
                        <td>Auto</td>
                        <td>Auto</td>
                        <td><code>Advanced</code> &rarr; <code>IGPU Config</code> &rarr;
                            <code>UMA Frame Buffer Size</code></td>
                    </tr>
                </tbody>
            </table>
            <div class="alert alert-note">
                <h4>VRAM Note</h4>
                <p>Strix Halo uses Unified Memory. Leaving VRAM on "Auto" is recommended. The OS will dynamically
                    allocate up to 96GB+ for AI/GPU workloads as needed.</p>
            </div>

            <h3>B.4: Set Boot Priority</h3>
            <ol>
                <li>Navigate to Boot menu.</li>
                <li>Set USB drive as first boot device.</li>
                <li>Save changes and exit (usually F10).</li>
            </ol>
        </section>

        <section id="phase-c">
            <h2>Phase C: Boot from Ventoy</h2>
            <ol>
                <li>Insert USB and boot system.</li>
                <li>Select the USB drive from the Boot Menu (usually F8 or F12).</li>
                <li>In the Ventoy menu, select <code>cachyos-desktop-linux-xxxx.iso</code>.</li>
                <li>Select <strong>Boot in normal mode</strong>.</li>
            </ol>

            <div class="alert alert-warning">
                <h4>Display Issues?</h4>
                <p>If the screen is black after booting, reboot and press <code>e</code> on the boot menu. Add
                    <code>nomodeset</code> to the kernel command line, then press <code>F10</code> to boot. This forces
                    a basic display driver for installation.</p>
            </div>
        </section>

        <section id="phase-d">
            <h2>Phase D: CachyOS Installation</h2>

            <h3>D.1: Start Calamares</h3>
            <p>Launch "Install CachyOS" from the desktop. Follow the prompts for Language, Region, and Keyboard Layout.
            </p>

            <h3>D.4: Partitioning</h3>
            <div class="alert alert-info">
                <h4>Filesystem Choice</h4>
                <p>Ensure you select <strong>BTRFS</strong>. This is required for snapshot functionality.</p>
            </div>

            <h4>Option A: Erase Entire Disk (Recommended)</h4>
            <p>Select "Erase Disk". Check "Swap to file" (with hibernate if desired). This automatically sets up the
                BTRFS subvolumes.</p>

            <h4>Option B: Manual Partitioning</h4>
            <table>
                <thead>
                    <tr>
                        <th>Mount Point</th>
                        <th>Size</th>
                        <th>Type</th>
                        <th>Filesystem</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>/boot/efi</code></td>
                        <td>512 MB - 1 GB</td>
                        <td>EFI System</td>
                        <td>FAT32</td>
                    </tr>
                    <tr>
                        <td><code>/</code></td>
                        <td>100 GB+</td>
                        <td>Linux Filesystem</td>
                        <td>BTRFS</td>
                    </tr>
                    <tr>
                        <td><code>swap</code></td>
                        <td>= RAM Size</td>
                        <td>Linux Swap</td>
                        <td>Swap</td>
                    </tr>
                    <tr>
                        <td><code>/home</code></td>
                        <td>Remaining</td>
                        <td>Linux Filesystem</td>
                        <td>BTRFS</td>
                    </tr>
                </tbody>
            </table>

            <h3>D.5 - D.8: Finalizing</h3>
            <ol>
                <li>Create your user account (ensure lowercase username).</li>
                <li>Select Desktop Environment (KDE Plasma recommended for Strix Halo).</li>
                <li>Review summary and click <strong>Install</strong>.</li>
                <li>Once finished, restart and remove the USB drive.</li>
            </ol>
        </section>

        <section id="phase-e">
            <h2>Phase E: First Boot & Script Prep</h2>

            <h3>E.1: Initial Login</h3>
            <p>Log in to your new installation. Open a terminal (Konsole/Terminal).</p>

            <h3>E.2: Verify Environment</h3>
            <div class="code-container">
                <div class="code-header"><span>Terminal</span></div>
                <pre># Check kernel
uname -r

# Check graphics (looking for gfx1150)
lspci | grep -i vga

# Verify internet connection
ping -c 3 archlinux.org</pre>
            </div>

            <h3>E.3: Copy & Prepare Scripts</h3>
            <p>Insert the Ventoy USB again. It will auto-mount (usually in <code>/run/media/$USER/Ventoy</code>).</p>

            <div class="code-container">
                <div class="code-header"><span>Terminal</span></div>
                <pre># Copy scripts to home directory
cp -r /run/media/$USER/Ventoy/strix-halo-setup ~/
cd ~/strix-halo-setup

# Make scripts executable
chmod +x master-control.sh
chmod +x stages/*.sh</pre>
            </div>

            <h3>E.4: Run Master Control</h3>
            <div class="code-container">
                <div class="code-header"><span>Terminal</span></div>
                <pre>sudo ./master-control.sh</pre>
            </div>
            <p>Follow the on-screen prompts to begin the automated configuration phases.</p>
        </section>

        <section id="phase-f">
            <h2>Phase F: Post-Install Stages</h2>
            <p>The scripts will guide you through the following automated tasks:</p>
            <table>
                <thead>
                    <tr>
                        <th>Stage</th>
                        <th>Task</th>
                        <th>Est. Time</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>Kernel Config (E610 Fix / IOMMU PT)</td>
                        <td>5 min</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Graphics Stack (Mesa/Vulkan)</td>
                        <td>10 min</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>System Update</td>
                        <td>15 min</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>LXD Container Setup (Auto GPU)</td>
                        <td>10 min</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Cleanup (Remove AI sysadmin)</td>
                        <td>5 min</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>User Applications (Dev/Office)</td>
                        <td>5 min</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td>Validation & Testing</td>
                        <td>10 min</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="appendix-a">
            <h2>Appendix A: Software Package Manifest</h2>
            <p><em>(Source: <code>docs/PACKAGES.md</code>)</em></p>

            <h3>1. Host OS (Hypervisor Layer)</h3>
            <p>The Host OS is kept minimal. Its only job is to provide hardware drivers (Kernel/Mesa) and manage
                containers.</p>

            <h4>Graphics Stack (Stage 2)</h4>
            <p><em>Required for Strix Halo (gfx1150) hardware acceleration.</em></p>
            <table>
                <thead>
                    <tr>
                        <th>Package</th>
                        <th>Version Requirement</th>
                        <th>Purpose</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>mesa</code></td>
                        <td><strong>25.3.1+</strong> (Current) / 24.1+ (Min)</td>
                        <td>OpenGL/Vulkan User-space drivers</td>
                    </tr>
                    <tr>
                        <td><code>vulkan-radeon</code></td>
                        <td>Latest</td>
                        <td>RADV Vulkan driver (Critical for Gaming/Compute)</td>
                    </tr>
                    <tr>
                        <td><code>llvm</code></td>
                        <td><strong>21.x</strong> (Current) / 17+ (Min)</td>
                        <td>Shader compiler backend for RADV</td>
                    </tr>
                    <tr>
                        <td><code>linux-firmware</code></td>
                        <td>Latest</td>
                        <td>GPU hardware firmware blobs</td>
                    </tr>
                    <tr>
                        <td><code>mesa-utils</code></td>
                        <td>-</td>
                        <td>Diagnostics (<code>glxinfo</code>)</td>
                    </tr>
                    <tr>
                        <td><code>vulkan-tools</code></td>
                        <td>-</td>
                        <td>Diagnostics (<code>vulkaninfo</code>)</td>
                    </tr>
                </tbody>
            </table>

            <h4>Virtualization & Containerization (Stage 4)</h4>
            <p><em>Required for running AI workspaces.</em></p>
            <table>
                <thead>
                    <tr>
                        <th>Package</th>
                        <th>Purpose</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>lxd</code></td>
                        <td>System container manager (Daemon)</td>
                    </tr>
                    <tr>
                        <td><code>lxc</code></td>
                        <td>Command line client</td>
                    </tr>
                    <tr>
                        <td><code>dnsmasq</code></td>
                        <td>DHCP/DNS for container networking</td>
                    </tr>
                    <tr>
                        <td><code>bridge-utils</code></td>
                        <td>Network bridge creation</td>
                    </tr>
                    <tr>
                        <td><code>iptables</code> / <code>ebtables</code></td>
                        <td>Firewall/NAT rules for containers</td>
                    </tr>
                </tbody>
            </table>

            <h4>System Utilities (Stage 3)</h4>
            <p><em>Build tools and basics.</em></p>
            <ul>
                <li><code>base-devel</code> (GCC, Make, etc - needed for compiling AUR helpers if required)</li>
                <li><code>git</code>, <code>wget</code>, <code>curl</code></li>
                <li><code>vim</code>, <code>neovim</code></li>
                <li><code>btop</code> (System monitoring)</li>
                <li><code>fastfetch</code> (System info)</li>
            </ul>

            <h3>2. Containers (AI Workspaces)</h3>
            <div class="alert alert-note">
                <h4>Note</h4>
                <p>The install scripts <em>prepare</em> the host for these, but do not pre-install them to keep the base
                    image clean. You install these <em>inside</em> your LXD containers.</p>
            </div>

            <h4>Recommended "Bleeding Edge" AI Stack</h4>
            <p>For Strix Halo AI Development:</p>
            <table>
                <thead>
                    <tr>
                        <th>Component</th>
                        <th>Arch Package</th>
                        <th>Purpose</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>ROCm SDK</strong></td>
                        <td><code>rocm-hip-sdk</code></td>
                        <td>ROCm/HIP Development Platform</td>
                    </tr>
                    <tr>
                        <td><strong>PyTorch</strong></td>
                        <td><code>python-pytorch-rocm</code></td>
                        <td>PyTorch with ROCm backend support</td>
                    </tr>
                    <tr>
                        <td><strong>TensorFlow</strong></td>
                        <td><code>python-tensorflow-rocm</code></td>
                        <td>TensorFlow with ROCm backend</td>
                    </tr>
                    <tr>
                        <td><strong>ML Libraries</strong></td>
                        <td><code>python-numpy</code>, <code>python-pandas</code></td>
                        <td>Data Science Basics</td>
                    </tr>
                </tbody>
            </table>

            <h3>3. User Applications (Stage 7)</h3>
            <p><em>Interactive selection. Not pre-installed by default (Opt-in).</em></p>
            <table>
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>Apps</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Browsers</strong></td>
                        <td>Firefox, Google Chrome, Ungoogled Chromium, Helium</td>
                    </tr>
                    <tr>
                        <td><strong>Dev</strong></td>
                        <td>Antigravity IDE (<code>antigravity-bin</code>)</td>
                    </tr>
                    <tr>
                        <td><strong>Office</strong></td>
                        <td>OnlyOffice (<code>onlyoffice-bin</code>)</td>
                    </tr>
                    <tr>
                        <td><strong>Chat</strong></td>
                        <td>Signal Desktop</td>
                    </tr>
                    <tr>
                        <td><strong>Media</strong></td>
                        <td>VLC</td>
                    </tr>
                </tbody>
            </table>

            <h3>4. Workspaces (Stage 8)</h3>
            <p><em>Automated container environments: <code>ai-lab</code> and <code>dev-lab</code>.</em></p>
            <table>
                <thead>
                    <tr>
                        <th>Workspace</th>
                        <th>Base Image</th>
                        <th>Packages Installed</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>ai-lab</strong></td>
                        <td>Arch Linux</td>
                        <td><code>rocm-hip-sdk</code> (v7.1+), <code>python-pytorch-rocm</code>,
                            <code>python-numpy</code></td>
                    </tr>
                    <tr>
                        <td><strong>dev-lab</strong></td>
                        <td>Arch Linux</td>
                        <td><code>base-devel</code>, <code>git</code>, <code>rust</code>, <code>go</code>,
                            <code>nodejs</code>, <code>npm</code>, <code>python</code></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="appendix-b">
            <h2>Appendix B: Troubleshooting</h2>

            <h3>Can't boot from USB</h3>
            <ul>
                <li>Check BIOS boot order.</li>
                <li>Try different USB port.</li>
                <li>Recreate Ventoy USB.</li>
            </ul>

            <h3>No display after install</h3>
            <ul>
                <li>Boot with kernel parameter <code>nomodeset</code>.</li>
                <li>Run graphics setup script to install proper drivers.</li>
            </ul>

            <h3>Script fails</h3>
            <ol>
                <li>
                    <strong>AI Diagnosis:</strong> Look for the specialized AI log file:
                    <ul>
                        <li>Path: <code>~/strix-halo-setup/logs/[stage].ai-context.log</code></li>
                        <li>Content: System Info + Failed Command + Last 50 lines of output.</li>
                        <li><strong>Action:</strong> Copy this text and paste it to an AI assistant (Gemini/Claude) for
                            immediate diagnosis.</li>
                    </ul>
                </li>
                <li>
                    <strong>Resume Support:</strong> You do not need to re-run successful steps.
                    <ul>
                        <li>Run the specific stage script with the <code>RESUME_STEP</code> variable.</li>
                        <li>Example: <code>sudo RESUME_STEP=3 ./stages/04-lxd-setup.sh</code> (This skips steps 1-2).
                        </li>
                    </ul>
                </li>
            </ol>

            <h3>System won't boot after script changes</h3>
            <ol>
                <li>Boot from Ventoy USB (CachyOS live).</li>
                <li>Mount your installed system.</li>
                <li>Chroot and fix the issue.</li>
                <li>Check kernel logs: <code>journalctl -xb</code></li>
            </ol>
        </section>

        <footer>
            <p>&copy; 2025 Dave Weinstein (@daveweinstein1). All rights reserved.<br>
                Updated: December 11, 2025 | Version: 2025.12.11</p>
        </footer>
    </main>

</body>

</html>